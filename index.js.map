{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport axios from 'axios';\n\nconst searchForm = document.querySelector('.search-form');\nconst gallery = document.querySelector('.gallery');\nconst apiKey = '46100469-a9a71a6d23d5188e64cb63582'; // Замініть на ваш ключ\nconst lightbox = new SimpleLightbox('.gallery a');\nconst loader = document.querySelector('.loader');\n\nsearchForm.addEventListener('submit', event => {\n  event.preventDefault();\n  const searchInput = document.querySelector('input[name=\"search\"]').value;\n  gallery.innerHTML = ''; // Очистити галерею перед новим пошуком\n\n  axios\n    .get(\n      `https://pixabay.com/api/?key=${apiKey}&q=${searchInput}&image_type=photo&orientation=horizontal&safesearch=true&_limit=9`\n    )\n    .then(response => {\n      const hits = response.data.hits;\n      console.log(hits);\n\n      if (hits.length === 0) {\n        iziToast.show({\n          title: 'Error',\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          color: 'red',\n          position: 'topCenter',\n        });\n      } else {\n        loader.style.display = 'block';\n        const totalImages = hits.length;\n        let loadedImages = 0; // Кількість завантажених зображень\n\n        hits.forEach(hit => {\n          const galleryItem = document.createElement('li');\n          galleryItem.classList.add('gallery-item');\n          galleryItem.innerHTML = `\n            <a href=\"${hit.largeImageURL}\">\n              <img src=\"${hit.webformatURL}\" alt=\"${hit.tags}\" class=\"gallery-image\">\n            </a>\n          `;\n          gallery.appendChild(galleryItem);\n\n          // Оновлення прогресу завантаження після завантаження кожного зображення\n          const image = galleryItem.querySelector('.gallery-image');\n          image.onload = () => {\n            loadedImages++;\n            if (loadedImages === totalImages) {\n              loader.style.display = 'none'; // Приховати завантажувач після завантаження всіх зображень\n            }\n          };\n        });\n\n        lightbox.refresh(); // Оновити SimpleLightbox\n      }\n    })\n    .catch(error => {\n      console.error(error); // Вивести помилку в консоль для відлагодження\n      iziToast.show({\n        title: 'Error',\n        message: 'Error - while loading images. Please open new images',\n        color: 'red',\n        position: 'topCenter',\n      });\n    });\n});\n"],"names":["searchForm","gallery","apiKey","lightbox","SimpleLightbox","loader","event","searchInput","axios","response","hits","iziToast","totalImages","loadedImages","hit","galleryItem","image","error"],"mappings":"owBAMA,MAAMA,EAAa,SAAS,cAAc,cAAc,EAClDC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,qCACTC,EAAW,IAAIC,EAAe,YAAY,EAC1CC,EAAS,SAAS,cAAc,SAAS,EAE/CL,EAAW,iBAAiB,SAAUM,GAAS,CAC7CA,EAAM,eAAc,EACpB,MAAMC,EAAc,SAAS,cAAc,sBAAsB,EAAE,MACnEN,EAAQ,UAAY,GAEpBO,EACG,IACC,gCAAgCN,CAAM,MAAMK,CAAW,mEACxD,EACA,KAAKE,GAAY,CAChB,MAAMC,EAAOD,EAAS,KAAK,KAG3B,GAFA,QAAQ,IAAIC,CAAI,EAEZA,EAAK,SAAW,EAClBC,EAAS,KAAK,CACZ,MAAO,QACP,QACE,2EACF,MAAO,MACP,SAAU,WACpB,CAAS,MACI,CACLN,EAAO,MAAM,QAAU,QACvB,MAAMO,EAAcF,EAAK,OACzB,IAAIG,EAAe,EAEnBH,EAAK,QAAQI,GAAO,CAClB,MAAMC,EAAc,SAAS,cAAc,IAAI,EAC/CA,EAAY,UAAU,IAAI,cAAc,EACxCA,EAAY,UAAY;AAAA,uBACXD,EAAI,aAAa;AAAA,0BACdA,EAAI,YAAY,UAAUA,EAAI,IAAI;AAAA;AAAA,YAGlDb,EAAQ,YAAYc,CAAW,EAG/B,MAAMC,EAAQD,EAAY,cAAc,gBAAgB,EACxDC,EAAM,OAAS,IAAM,CACnBH,IACIA,IAAiBD,IACnBP,EAAO,MAAM,QAAU,OAErC,CACA,CAAS,EAEDF,EAAS,QAAO,CACjB,CACP,CAAK,EACA,MAAMc,GAAS,CACd,QAAQ,MAAMA,CAAK,EACnBN,EAAS,KAAK,CACZ,MAAO,QACP,QAAS,uDACT,MAAO,MACP,SAAU,WAClB,CAAO,CACP,CAAK,CACL,CAAC"}