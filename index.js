import{a as w,S,i as f}from"./assets/vendor-BzajH6aU.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const t of e)if(t.type==="childList")for(const a of t.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function o(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?t.credentials="include":e.crossOrigin==="anonymous"?t.credentials="omit":t.credentials="same-origin",t}function r(e){if(e.ep)return;e.ep=!0;const t=o(e);fetch(e.href,t)}})();const b=document.querySelector(".loader"),q="46100469-a9a71a6d23d5188e64cb63582";new URLSearchParams({image_type:"photo",orientation:"horizontal",safesearch:!0});function g(i){b.style.display=i?"block":"none"}document.querySelector('input[name="search"]').value;async function y(i,n,o){if(i===""){iziToast.show({});return}try{const r=await w.get(`https://pixabay.com/api/?key=${q}&q=${i}&page=${n}&per_page=${o}`);return{hits:r.data.hits,total:r.data.total}}catch{}}const v=document.querySelector(".search-form"),m=document.querySelector(".gallery");let s;const u=15;let d=1,h=0;const p=new S(".gallery a");document.querySelector(".loader");v.addEventListener("submit",async i=>{i.preventDefault();const n=document.querySelector('input[name="search"]').value.trim();m.innerHTML="",s&&s.remove(),g&&g(!1);let o=0;d=1;try{const{hits:r,total:e}=await y(n,d,u);if(h=Math.ceil(e/u),console.log(h),r.length===0){f.show({title:"Error",message:"Вибачте, ви нічого не написали зрозумілою мовою. Введіть людське слово для пошуку!",color:"red",position:"topCenter"});return}else{g(!0);const t=r.length;r.forEach(a=>{const l=document.createElement("li");l.classList.add("gallery-item"),l.innerHTML=`
          <a href="${a.largeImageURL}">
            <img src="${a.webformatURL}" alt="${a.tags}" class="gallery-image">
          </a>
        `,m.appendChild(l);const c=l.querySelector(".gallery-image");c.onload=()=>{o++,console.log(o),o===t&&g(!1)}}),p.refresh()}r.length>=u&&(s=document.createElement("button"),s.textContent="Load more",s.classList.add("load-more"),m.after(s)),s.addEventListener("click",async()=>{d++;const{hits:t}=await y(n,d,u);g(!0),t.forEach(l=>{const c=document.createElement("li");c.classList.add("gallery-item"),c.innerHTML=`
          <a href="${l.largeImageURL}">
            <img src="${l.webformatURL}" alt="${l.tags}" class="gallery-image">
          </a>
        `,m.appendChild(c),console.log(o);const L=c.querySelector(".gallery-image");o=0,L.onload=()=>{o++,console.log(o),console.log(t.length),o===t.length&&g(!1)}}),p.refresh();const a=document.querySelector(".gallery-item");if(a){const{height:l}=a.getBoundingClientRect();window.scrollBy({top:l*2,behavior:"smooth"})}d===h&&(f.show({title:"Infoline",message:"This is the last page",color:"green",position:"topCenter"}),s.remove())})}catch{f.show({title:"Error",message:"Sorry, you have not written anything. Еnter a few letters to search!",color:"red",position:"topCenter"});return}finally{}});
//# sourceMappingURL=index.js.map
