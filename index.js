import{a as w,S,i as u}from"./assets/vendor-BzajH6aU.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))o(t);new MutationObserver(t=>{for(const e of t)if(e.type==="childList")for(const a of e.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&o(a)}).observe(document,{childList:!0,subtree:!0});function r(t){const e={};return t.integrity&&(e.integrity=t.integrity),t.referrerPolicy&&(e.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?e.credentials="include":t.crossOrigin==="anonymous"?e.credentials="omit":e.credentials="same-origin",e}function o(t){if(t.ep)return;t.ep=!0;const e=r(t);fetch(t.href,e)}})();const b=document.querySelector(".loader"),q="46100469-a9a71a6d23d5188e64cb63582";new URLSearchParams({image_type:"photo",orientation:"horizontal",safesearch:!0});function c(n){b.style.display=n?"block":"none"}document.querySelector('input[name="search"]').value;async function p(n,s,r){if(n===""){iziToast.show({});return}try{const o=await w.get(`https://pixabay.com/api/?key=${q}&q=${n}&page=${s}&per_page=${r}`);return{hits:o.data.hits,total:o.data.total}}catch(o){console.error("Помилка при отриманні даних з Pixabay:",o),iziToast.show({title:"Помилка",message:"Виникла помилка при пошуку зображень. Будь ласка, спробуйте пізніше.",color:"red",position:"topCenter"})}}const $=document.querySelector(".search-form"),g=document.querySelector(".gallery");let y;const m=15;let d=1,f=0;const h=new S(".gallery a"),E=document.querySelector(".loader");$.addEventListener("submit",async n=>{n.preventDefault();const s=document.querySelector('input[name="search"]').value.trim();g.innerHTML="",c&&c(!1);let r=0;d=1;try{const{hits:o,total:t}=await p(s,d,m);if(f=Math.ceil(t/m),console.log(f),o.length===0){u.show({title:"Error",message:"Sorry",color:"red",position:"topCenter"});return}else{c(!0);const e=o.length;o.forEach(a=>{const l=document.createElement("li");l.classList.add("gallery-item"),l.innerHTML=`
          <a href="${a.largeImageURL}">
            <img src="${a.webformatURL}" alt="${a.tags}" class="gallery-image">
          </a>
        `,g.appendChild(l);const i=l.querySelector(".gallery-image");i.onload=()=>{r++,console.log(r),r===e&&c(!1)}}),h.refresh()}if(o.length>=m){e=document.createElement("button"),e.textContent="Load more",e.classList.add("load-more"),g.after(e);const e=document.querySelector(".load-more");e.parentNode.insertBefore(E,e)}y.addEventListener("click",async()=>{d++;const{hits:e}=await p(s,d,m);c(!0),e.forEach(l=>{const i=document.createElement("li");i.classList.add("gallery-item"),i.innerHTML=`
          <a href="${l.largeImageURL}">
            <img src="${l.webformatURL}" alt="${l.tags}" class="gallery-image">
          </a>
        `,g.appendChild(i),console.log(r);const L=i.querySelector(".gallery-image");r=0,L.onload=()=>{r++,console.log(r),console.log(e.length),r===e.length&&c(!1)}}),h.refresh();const a=document.querySelector(".gallery-item");if(a){const{height:l}=a.getBoundingClientRect();window.scrollBy({top:l*2,behavior:"smooth"})}d===f&&(u.show({title:"Infoline",message:"This is the last page",color:"green",position:"topCenter"}),y.remove())})}catch{u.show({title:"Error",message:"Вибачте, ви нічого не написали зрозумілою мовою. Введіть людське слово для пошуку!",color:"red",position:"topCenter"});return}finally{}});
//# sourceMappingURL=index.js.map
