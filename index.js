import{a as y,S as L,i as l}from"./assets/vendor-CJy7kY9F.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))m(t);new MutationObserver(t=>{for(const s of t)if(s.type==="childList")for(const u of s.addedNodes)u.tagName==="LINK"&&u.rel==="modulepreload"&&m(u)}).observe(document,{childList:!0,subtree:!0});function n(t){const s={};return t.integrity&&(s.integrity=t.integrity),t.referrerPolicy&&(s.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?s.credentials="include":t.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function m(t){if(t.ep)return;t.ep=!0;const s=n(t);fetch(t.href,s)}})();const v="46100469-a9a71a6d23d5188e64cb63582";async function g(r,e){return(await y.get("https://pixabay.com/api/",{params:{key:v,q:r,image_type:"photo",orientation:"",safesearch:"true",page:e,per_page:15}})).data}const f=document.querySelector(".gallery");let b=new L(".gallery a",{captionsData:"alt",captionDelay:250});function p(r){r.forEach(e=>{const n=document.createElement("li");n.classList.add("gallery-item"),n.innerHTML=`
      <a href="${e.largeImageURL}">
        <img src="${e.webformatURL}" alt="${e.tags}" class="gallery-image">
      </a>
    `,f.appendChild(n)}),b.refresh()}function w(){f.innerHTML=""}const S=document.querySelector(".search-form"),q=document.querySelector(".search"),o=document.querySelector(".load-more");o.classList.add("hidden");const a=document.querySelector(".loader");a.classList.add("hidden");let c="",h=1,i=0,d=0;S.addEventListener("submit",async r=>{if(r.preventDefault(),a.classList.remove("hidden"),alert("зробив рефакторинг, все одно не розумію до кінця і що з цим робити???"),o&&o.classList.add("hidden"),h=1,c=q.value.trim(),c===""){a.classList.add("hidden"),l.warning({message:"Please fill this field",position:"topCenter"});return}w(),i=0;try{const{hits:e,totalHits:n}=await g(c,h);if(e.length===0){l.info({message:"Sorry, такий собі запит... Придумай щось краще!",position:"topCenter",color:"red"}),a.classList.add("hidden"),o.classList.add("hidden");return}d=n,i+=e.length,p(e),o.classList.remove("hidden"),a.classList.add("hidden"),console.log(i),console.log(d),i<d&&(o.classList.remove("hidden"),a.classList.add("hidden")),i>=d&&(o.classList.add("hidden"),l.info({message:"We're sorry, but you've reached the end of search results.",position:"topCenter"}))}catch(e){console.error("Error during receiving images:",e),l.error({message:"Something went wrong! Please try again later.",position:"topCenter"}),a.classList.add("hidden")}});o.addEventListener("click",async()=>{h++,a.classList.remove("hidden");try{o.classList.add("hidden");const{hits:r}=await g(c,h);i+=r.length,a.classList.add("hidden"),p(r),console.log(i),console.log(d),i<d&&(o.classList.remove("hidden"),a.classList.add("hidden")),i>=d&&(o.classList.add("hidden"),l.info({message:"We're sorry, but you've reached the end of search results.",position:"topCenter"}));const{height:e}=document.querySelector(".gallery-item").getBoundingClientRect();window.scrollBy({top:e*2,behavior:"smooth"})}catch(r){console.error("Error loading additional images:",r)}});
//# sourceMappingURL=index.js.map
